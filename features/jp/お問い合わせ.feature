# language: ja
@お問い合わせ @回帰テスト
機能: お問い合わせ機能
  Automation Exercise ウェブサイトのユーザーとして
  サポートチームに連絡を取りたい
  ヘルプやフィードバックを提供するために

  背景:
    前提 Automation Exercise のホームページにいる
    もし お問い合わせページに移動する

  @スモーク @正常系
  シナリオ: お問い合わせページへの移動が成功する
    ならば お問い合わせページのタイトルが表示されている
    かつ お問い合わせフォームが表示されている

  @バリデーション @異常系
  シナリオ: メールフィールドが空白の場合のメールバリデーションを確認する
    もし 空白のメールでお問い合わせフォームを入力する:
      | 名前      | 田中太郎                      |
      | メール    |                               |
      | 件名      | テスト件名                    |
      | メッセージ | これはテストメッセージです。  |
    かつ 送信ボタンをクリックする
    ならば メールバリデーションメッセージ "このフィールドを入力してください。" が表示される

  @正常系 @ファイルアップロード
  シナリオ: ファイル添付ありでお問い合わせフォームの送信が成功する
    前提 一意のテストデータを生成している
    もし 有効なデータでお問い合わせフォームを入力する:
      | 名前      | {生成された名前}      |
      | メール    | {生成されたメール}    |
      | 件名      | {生成された件名}      |
      | メッセージ | {生成されたメッセージ} |
    かつ テストファイル "test-files/images/test001.png" をアップロードする
    かつ 送信ボタンをクリックする
    かつ 確認ダイアログを処理する
    ならば 成功メッセージ "Success! Your details have been submitted successfully." が表示される

  @正常系 @データ駆動
  シナリオアウトライン: 異なる有効なデータセットでお問い合わせフォームを送信する
    もし 以下のデータでお問い合わせフォームを入力する:
      | 名前      | <名前>      |
      | メール    | <メール>    |
      | 件名      | <件名>      |
      | メッセージ | <メッセージ> |
    かつ 送信ボタンをクリックする
    かつ 確認ダイアログを処理する
    ならば 成功メッセージ "Success! Your details have been submitted successfully." が表示される

    例:
      | 名前        | メール                      | 件名            | メッセージ                    |
      | 竈門炭治郎  | tanjiro@demonslayer.com     | バグレポート    | システムにバグを発見しました  |
      | 竈門禰豆子  | nezuko@demonslayer.com      | 機能要求        | ダークモードを追加してください |
      | 我妻善逸    | zenitsu@demonslayer.com     | 一般的な問い合わせ | この機能の使い方を教えてください |

  @異常系 @バリデーション
  シナリオアウトライン: 無効な入力に対するフォームバリデーションを確認する
    もし 無効なデータでお問い合わせフォームを入力する:
      | 名前      | <名前>      |
      | メール    | <メール>    |
      | 件名      | <件名>      |
      | メッセージ | <メッセージ> |
    かつ 送信ボタンをクリックする
    ならば "<フィールド>" フィールドのバリデーションエラーが表示される

    例:
      | 名前    | メール              | 件名    | メッセージ | フィールド |
      |         | valid@email.com     | 件名    | メッセージ | 名前       |
      | 名前    | invalid-email       | 件名    | メッセージ | メール     |
      | 名前    | valid@email.com     |         | メッセージ | 件名       |
      | 名前    | valid@email.com     | 件名    |            | メッセージ |
